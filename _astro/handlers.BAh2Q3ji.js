import{A as E}from"./constants.NDiqomde.js";import{a as h}from"./utils.B5275Si-.js";async function L(){return fetch(E.currentPlayerStatus).then(i=>i.json())}async function N(){return fetch(E.topSpotifySongsAndTracks).then(i=>i.json())}class C{static createArtistCard(t={}){const{images:e,external_urls:a,name:n}=t,l=document.createElement("li"),o=document.createElement("img"),c=document.createElement("h4"),r=document.createElement("a");return l.className="card artistCard",o.src=h(e)?.url,o.alt=n,r.href=a?.spotify,r.target="_blank",c.innerText=n,r.appendChild(c),l.appendChild(o),l.appendChild(r),l}}class p{static getWrapperEl(){return document.querySelector(".spotifyData > div > div.topArtistsContainer > ul")}static getContainerEl(){return document.querySelector(".spotifyData > div > div.topArtistsContainer")}static clear(){this.getWrapperEl().innerHTML=""}static hide(){this.getContainerEl().style="display: none;"}static show(){this.getWrapperEl().style=""}static addArtist(t){const e=C.createArtistCard(t);this.getWrapperEl()?.appendChild(e)}}const d=new Audio;class g{static getWrapperEl(){return document.getElementById("topTracksListContainer")}static getContainerEl(){return document.getElementById("topTracksContainer")}static clear(){this.getWrapperEl().innerHTML=""}static hide(){this.getContainerEl().style="display: none;"}static show(){this.getContainerEl().style=""}static addTrack(t={}){const{album:e={},name:a,external_urls:n,artists:l,preview_url:o}=t,{images:c=[]}=e,r=new f;l.forEach(y=>r.addArtist(y)),r.updateCoverArt(c,a,o),r.updateSongTitle(a,n?.spotify),r.apppendToDom(this.getWrapperEl())}}class f{constructor(){this.createElements()}createElements(){this.cardContainerEl=document.createElement("li"),this.cardContainerEl.className="card trackCard",this.coverArtEl=document.createElement("img"),this.songTitleEl=document.createElement("h4"),this.songTitleContainerEl=document.createElement("a"),this.metaDiv=document.createElement("div"),this.artistContainer=document.createElement("span")}addArtist(t={}){const e=!this.artistContainer.innerText;this.artistContainer.innerText=this.artistContainer.innerText.concat(e?"":", ",t.name)}updateCoverArtPreviewUrl(t){t&&(this.coverArtEl.classList.add("hasPreview"),this.coverArtEl.addEventListener("click",()=>{if(d.src===t&&!d.paused){this.coverArtEl.classList.remove("playing"),d.pause();return}d.src=t,this.coverArtEl.classList.add("playing"),d.play()}))}updateCoverArt(t=[],e,a){this.coverArtEl.src=h(t)?.url,this.coverArtEl.alt=e,this.updateCoverArtPreviewUrl(a)}updateSongTitle(t,e){this.songTitleEl.innerText=t,e&&(this.songTitleContainerEl.href=e,this.songTitleContainerEl.target="_blank")}apppendToDom(t){this.songTitleContainerEl.appendChild(this.songTitleEl),this.metaDiv.appendChild(this.songTitleContainerEl),this.metaDiv.appendChild(this.artistContainer),this.cardContainerEl.appendChild(this.coverArtEl),this.cardContainerEl.appendChild(this.metaDiv),t.appendChild(this.cardContainerEl)}}function u(i){i&&i.classList.add("displayNone")}function m(i){i&&i.classList.remove("displayNone")}class T{static getVinylEl(){return document.getElementById("nowPlayingTrackVinyl")}static spin(){this.getVinylEl()?.classList.add("spinVinyl")}static stopSpin(){this.getVinylEl()?.classList.remove("spinVinyl")}static updateImage(t=[],e){const a=h(t);this.getVinylEl().style.backgroundImage=`url('${a?.url}')`,this.getVinylEl().alt=e}}class A{static createArtistEl(t={}){const{name:e="",external_urls:a}=t,n=document.createElement("a");return n.innerText=e,n.href=a.spotify,n.target="_blank",n}static getContainerEl(){return document.getElementById("nowPlayingArtists")}static clear(){this.getContainerEl().innerHTML=""}static add(t={}){const e=this.getContainerEl();e.innerHTML===""||(e.innerHTML=e.innerHTML.concat(", "));const n=this.createArtistEl(t);e?.append(n)}}class v{static getEl(){return document.getElementById("nowPlayingTitle")}static setTitle(t){const e=this.getEl();e.innerHTML=t,e.target="_blank"}static setLink(t){const e=this.getEl();e.href=t,e.target="_blank"}}class s{static vinyl=T;static artists=A;static title=v;static getNotPlayingMessageWrapperEl(){return document.getElementById("notPlayingWrap")}static getNowPlayingWrapper(){return document.getElementById("nowPlayingInfo")}static hideNowPlayingWrapper(){u(this.getNowPlayingWrapper())}static hideNotPlayingWrapper(){u(this.getNotPlayingMessageWrapperEl())}static showNowPlayingWrapper(){m(this.getNowPlayingWrapper())}static showNotPlayingWrapper(){m(this.getNotPlayingMessageWrapperEl())}}function W(i={}){const{is_playing:t,item:e={}}=i,{name:a,artists:n,external_urls:l,album:o={}}=e,{images:c}=o;if(!t){s.hideNowPlayingWrapper(),s.showNotPlayingWrapper(),s.vinyl.stopSpin();return}s.showNowPlayingWrapper(),s.hideNotPlayingWrapper(),s.title.setTitle(a),s.title.setLink(l.spotify),s.vinyl.updateImage(c,a),s.vinyl.spin(),s.artists.clear(),n?.forEach(r=>s.artists.add(r))}function k(i=[]){if(!i.length){p.hide();return}p.clear(),p.show(),i.forEach((t={})=>p.addArtist(t))}function S(i=[]){if(g.clear(),!i.length){g.hide();return}g.show(),i.forEach((t={})=>g.addTrack(t))}function I(i){const t=document.querySelector(".spotifyData > div > a.spotifyLogoContainer");t.href=i}export{I as a,S as b,W as c,L as d,N as f,k as p};
