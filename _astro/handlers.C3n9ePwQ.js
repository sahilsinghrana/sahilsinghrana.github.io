const y={topSpotifySongsAndTracks:"https://mytopsongs.sahilsinghrana.workers.dev/",currentPlayerStatus:"https://mytopsongs.sahilsinghrana.workers.dev/currentPlaying"};async function P(){return fetch(y.currentPlayerStatus).then(i=>i.json())}async function w(){return fetch(y.topSpotifySongsAndTracks).then(i=>i.json())}function g(i=[]){return i.filter(t=>t.height>50).sort((t,e)=>t.height-e.height).at(0)}class C{static createArtistCard(t={}){const{images:e,external_urls:a,name:n}=t,l=document.createElement("li"),o=document.createElement("img"),c=document.createElement("h4"),s=document.createElement("a");return l.className="card artistCard",o.src=g(e)?.url,o.alt=n,s.href=a?.spotify,s.target="_blank",c.innerText=n,s.appendChild(c),l.appendChild(o),l.appendChild(s),l}}class p{static getWrapperEl(){return document.querySelector("body > main > div > div.spotifyData > div > div.topArtistsContainer > ul")}static getContainerEl(){return document.querySelector("body > main > div > div.spotifyData > div > div.topArtistsContainer")}static clear(){this.getWrapperEl().innerHTML=""}static hide(){this.getContainerEl().style="display: none;"}static show(){this.getWrapperEl().style=""}static addArtist(t){const e=C.createArtistCard(t);this.getWrapperEl()?.appendChild(e)}}const d=new Audio;class h{static getWrapperEl(){return document.getElementById("topTracksListContainer")}static getContainerEl(){return document.getElementById("topTracksContainer")}static clear(){this.getWrapperEl().innerHTML=""}static hide(){this.getContainerEl().style="display: none;"}static show(){this.getContainerEl().style=""}static addTrack(t={}){const{album:e={},name:a,external_urls:n,artists:l,preview_url:o}=t,{images:c=[]}=e,s=new f;l.forEach(E=>s.addArtist(E)),s.updateCoverArt(c,a,o),s.updateSongTitle(a,n?.spotify),s.apppendToDom(this.getWrapperEl())}}class f{constructor(){this.createElements()}createElements(){this.cardContainerEl=document.createElement("li"),this.cardContainerEl.className="card trackCard",this.coverArtEl=document.createElement("img"),this.songTitleEl=document.createElement("h4"),this.songTitleContainerEl=document.createElement("a"),this.metaDiv=document.createElement("div"),this.artistContainer=document.createElement("span")}addArtist(t={}){const e=!this.artistContainer.innerText;this.artistContainer.innerText=this.artistContainer.innerText.concat(e?"":", ",t.name)}updateCoverArtPreviewUrl(t){t&&(this.coverArtEl.classList.add("hasPreview"),this.coverArtEl.addEventListener("click",()=>{if(d.src===t&&!d.paused){this.coverArtEl.classList.remove("playing"),d.pause();return}d.src=t,this.coverArtEl.classList.add("playing"),d.play()}))}updateCoverArt(t=[],e,a){this.coverArtEl.src=g(t)?.url,this.coverArtEl.alt=e,this.updateCoverArtPreviewUrl(a)}updateSongTitle(t,e){this.songTitleEl.innerText=t,e&&(this.songTitleContainerEl.href=e,this.songTitleContainerEl.target="_blank")}apppendToDom(t){this.songTitleContainerEl.appendChild(this.songTitleEl),this.metaDiv.appendChild(this.songTitleContainerEl),this.metaDiv.appendChild(this.artistContainer),this.cardContainerEl.appendChild(this.coverArtEl),this.cardContainerEl.appendChild(this.metaDiv),t.appendChild(this.cardContainerEl)}}function u(i){i&&i.classList.add("displayNone")}function m(i){i&&i.classList.remove("displayNone")}class T{static getVinylEl(){return document.getElementById("nowPlayingTrackVinyl")}static spin(){this.getVinylEl()?.classList.add("spinVinyl")}static stopSpin(){this.getVinylEl()?.classList.remove("spinVinyl")}static updateImage(t=[],e){const a=g(t);this.getVinylEl().style.backgroundImage=`url('${a?.url}')`,this.getVinylEl().alt=e}}class v{static createArtistEl(t={}){const{name:e="",external_urls:a}=t,n=document.createElement("a");return n.innerText=e,n.href=a.spotify,n.target="_blank",n}static getContainerEl(){return document.getElementById("nowPlayingArtists")}static clear(){this.getContainerEl().innerHTML=""}static add(t={}){const e=this.getContainerEl();e.innerHTML===""||(e.innerHTML=e.innerHTML.concat(", "));const n=this.createArtistEl(t);e?.append(n)}}class A{static getEl(){return document.getElementById("nowPlayingTitle")}static setTitle(t){const e=this.getEl();e.innerHTML=t,e.target="_blank"}static setLink(t){const e=this.getEl();e.href=t,e.target="_blank"}}class r{static vinyl=T;static artists=v;static title=A;static getNotPlayingMessageWrapperEl(){return document.getElementById("notPlayingWrap")}static getNowPlayingWrapper(){return document.getElementById("nowPlayingInfo")}static hideNowPlayingWrapper(){u(this.getNowPlayingWrapper())}static hideNotPlayingWrapper(){u(this.getNotPlayingMessageWrapperEl())}static showNowPlayingWrapper(){m(this.getNowPlayingWrapper())}static showNotPlayingWrapper(){m(this.getNotPlayingMessageWrapperEl())}}function k(i={}){const{is_playing:t,item:e={}}=i,{name:a,artists:n,external_urls:l,album:o={}}=e,{images:c}=o;if(!t){r.hideNowPlayingWrapper(),r.showNotPlayingWrapper(),r.vinyl.stopSpin();return}r.showNowPlayingWrapper(),r.hideNotPlayingWrapper(),r.title.setTitle(a),r.title.setLink(l.spotify),r.vinyl.updateImage(c,a),r.vinyl.spin(),r.artists.clear(),n?.forEach(s=>r.artists.add(s))}function L(i=[]){if(!i.length){p.hide();return}p.clear(),p.show(),i.forEach((t={})=>p.addArtist(t))}function N(i=[]){if(h.clear(),!i.length){h.hide();return}h.show(),i.forEach((t={})=>h.addTrack(t))}function W(i){const t=document.querySelector("body > main > div > div.spotifyData > div > a.spotifyLogoContainer");t.href=i}export{W as a,N as b,k as c,P as d,w as f,L as p};
