---
import { Image } from "astro:assets";

import Moon from "./moon.webp";

import "./index.scss";
---

<script>
  import { getRandom } from "@components/Spotify/helpers/utils";

  const body = document.getElementsByTagName("body");
  const meteorDiv = document.createElement("div");
  meteorDiv.className = "meteor";

  for (let i = 0; i <= 28; i++) {
    const left = Math.floor(getRandom(-140, 150));
    const delay = i === 0 ? 0.4 : getRandom(0, 50).toFixed(2);
    const width = getRandom(45, 340);
    const height = getRandom(0.18, 3.1, 0.1);
    const duration = 20 - ((width - 45) / (340 - 45)) * (20 - 6);

    meteorDiv.style.setProperty("--duration", `${duration.toFixed(0)}s`);
    meteorDiv.style.setProperty("--width", `${width}px`);
    meteorDiv.style.setProperty("--height", `${height}px`);
    meteorDiv.style.setProperty("--left", `${left}%`);
    meteorDiv.style.setProperty("--delay", `${delay}s`);
    meteorDiv.style.setProperty(
      "--max-opacity",
      String(getRandom(0.35, 0.49, 0.01)),
    );

    body.item(0)?.appendChild(meteorDiv.cloneNode(true));
  }
</script>

<Image src={Moon} height={300} width={310} class="myMoon" alt="Sahil's Moon." />
