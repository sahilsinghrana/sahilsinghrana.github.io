---
import { Image } from "astro:assets";

import Moon from "./moon.webp";

import "./index.scss";
---

<script>
  import { getRandom } from "@components/Spotify/helpers/utils";

  const body = document.getElementsByTagName("body");
  const meteorDiv = document.createElement("div");
  meteorDiv.className = "meteor";

  for (let i = 0; i <= 28; i++) {
    const left = Math.floor(getRandom(-140, 150));
    const delay = i === 0 ? 1 : getRandom(0, 50).toFixed(2);
    const width = getRandom(40, 330);
    const height = getRandom(0.2, 3.3, 0.1);

    meteorDiv.style.setProperty("--width", `${width}px`);
    meteorDiv.style.setProperty("--height", `${height}px`);
    meteorDiv.style.setProperty("--left", `${left}%`);
    meteorDiv.style.setProperty("--delay", `${delay}s`);
    meteorDiv.style.setProperty(
      "--max-opacity",
      String(getRandom(0.27, 0.42, 0.05)),
    );

    body.item(0)?.appendChild(meteorDiv.cloneNode(true));
  }
</script>

<Image src={Moon} height={300} width={310} class="myMoon" alt="Sahil's Moon." />
