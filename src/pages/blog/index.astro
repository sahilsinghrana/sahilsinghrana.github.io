---
import { getCollection } from "astro:content";

import SectionHeaderImage from "@components/General/Image/SectionHeaderImage.astro";
import Layout from "@layouts/index.astro";

import placeholderImage from "@images/placeholder.webp";
import chaseMoon from "@images/chase.gif";

import PostCard from "@components/General/Blog/PostCard.astro";
import SnippetCard from "@components/General/Blog/SnippetCard/index.astro";

const blogEntries = await getCollection("blog");
const snippetsEntries = await getCollection("snippets");
---

<Layout
  title="Blog | Sahil Rana"
  description={"Welcome to my blog homepage. I write random stuff!"}
  keywords={[
    "Blog",
    "Sahil Rana",
    "Sahil",
    "poems",
    "story",
    "poem",
    "Technology",
    "Javacript",
  ]}
>
  <SectionHeaderImage
    title="Blog"
    Image={placeholderImage}
    quote="The Moonâ€™s surface is actually dark"
  />
  <div
    style="display:flex; gap : 1.2rem; margin-top : 2rem; flex-wrap: wrap; justify-content: space-around;"
  >
    {
      blogEntries.map(async (post) => {
        const { title, description, image, pubDate, author } = post.data;
        return (
          <PostCard
            title={title}
            description={description}
            image={image}
            pubDate={pubDate}
            author={author}
            slug={"/blog/posts/" + post.slug}
          />
        );
      })
    }
    <PostCard
      title={"Why Moon?"}
      description={"Why moon is so inspiring ?"}
      image={{
        url: chaseMoon,
        alt: "Alt",
      }}
      pubDate={"17-01-2024"}
      author={"Sahil Rana"}
      slug={"/blog/whyMoon"}
    />
  </div>
  <div
    style="margin-top: 2em; background: #79787850; padding : 20px; border-radius:8px;"
  >
    <div
      style="display : flex; justify-content:space-between; align-items: center; font-size:1rem; width : 100%; "
    >
      <h3 style="font-size:0.9rem">Snippets</h3>
      <a href="/blog/snippets" style="font-size:0.75rem; color : lightgray;"
        >View more
      </a>
    </div>

    {
      snippetsEntries.map(async (post) => {
        const { title, description, image } = post.data;
        return (
          <SnippetCard
            title={title}
            description={description}
            image={image}
            slug={post.slug}
          />
        );
      })
    }
  </div>
</Layout>
