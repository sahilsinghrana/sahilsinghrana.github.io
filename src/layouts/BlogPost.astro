---
import { Breadcrumbs } from "astro-breadcrumbs";
import { Schema } from "astro-seo-schema";

import Layout from "./index.astro";
import "./blogPost.scss";
import { Image } from "astro:assets";
import { formatDate } from "@utils/date";

const { entry } = Astro.props;

const { data } = entry;
const { title, image, description, tags, pubDate } = data;
---

<head>
  <Schema
    item={{
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      headline: title,
      description: description,
      mainEntityOfPage: {
        "@type": "WebPage",
      },
      author: {
        "@type": "Person",
        name: "Sahil Rana",
        url: "https://sahilrana.in",
      },
      publisher: {
        "@type": "Organization",
        name: "Sahil Rana",
        logo: {
          "@type": "ImageObject",
          url: "https://avatars.githubusercontent.com/u/48375250",
        },
      },
      datePublished: pubDate,
      dateModified: pubDate,
      keywords: tags.join(", "),
      articleSection: "Technology",
      inLanguage: "en-US",
    }}
  />
</head>

<Layout
  title={title + " | Sahil Rana"}
  description={description}
  keywords={tags}
>
  <div class="blogPostHeading">
    <div class="bg">
      <Image
        src={image.url}
        alt={image.alt}
        height={image.url.height || 100}
        width={image.url.width || 300}
        loading="eager"
      />
      <div class="head">
        <h2><em>{title}</em></h2>
        <Breadcrumbs
          linkTextFormat="capitalized"
          mainBemClass="blog-breadcrumbs"
        />
      </div>
    </div>
  </div>
  <slot />
  {
    pubDate && (
      <div class="blogPostMeta">
        <span class="pubDate">
          Published On:{" "}
          <time datetime={formatDate(pubDate)}>{formatDate(pubDate)}</time>
        </span>
      </div>
    )
  }
</Layout>
